<script>
	// @ts-nocheck

	import Icon from '@iconify/svelte';
	import Header from '../../components/Header.svelte';
	import { translations } from '$lib/stores/translation';
	import { language } from '$lib/stores/language';
	import { onMount, afterUpdate, getContext } from 'svelte';
	import { auth } from '$lib/firebase';
	import { signInWithEmailAndPassword } from 'firebase/auth';
	import { goto } from '$app/navigation';
	import { preventDefault } from 'svelte/legacy';

	let join = false;
	let create = false;

	// ***************************** Create Test ***************************** //

	let title = '';
	let description = '';
	let questionCount = 1;

	const answerTypes = ['radio', 'checkbox', 'text'];

	let questions = [
		{ text: '', type: 'radio', options: ['', ''], correctAnswers: [], explanation: '' }
	];

	// Reactively resize question list
	$: if (questionCount > 0) {
		questions = Array.from({ length: questionCount }, (_, i) => {
			return (
				questions[i] || {
					text: '',
					type: 'radio',
					options: ['', ''],
					correctAnswers: [],
					explanation: ''
				}
			);
		});
	}

	let testTitle = '';
	let numberOfQuestions = 1;

	function generateCode() {
		return Math.random().toString(36).substring(2, 8).toUpperCase();
	}

	function handleSubmit(e) {
		e.preventDefault();

		if (!testTitle || questions.length === 0) {
			alert('Please enter a title and at least one question.');
			return;
		}

		const code = generateCode();

		const test = {
			title: testTitle,
			code,
			questions,
			createdAt: new Date().toISOString()
		};

		const stored = JSON.parse(localStorage.getItem('tests') || '[]');
		stored.push(test);
		localStorage.setItem('tests', JSON.stringify(stored));

		alert(`Test created with code: ${code}`);

		// Clear the form
		testTitle = '';
		questions = [];
		numberOfQuestions = 1;
	}

	function addOption(qIndex) {
		questions[qIndex].options.push('');

		questions = [...questions];
	}

	function removeOption(qIndex, oIndex) {
		questions[qIndex].options.splice(oIndex, 1);
		questions[qIndex].correctAnswers = questions[qIndex].correctAnswers.filter((i) => i !== oIndex);
	}

	function toggleCorrectAnswer(qIndex, oIndex) {
		const correct = questions[qIndex].correctAnswers;

		const isMulti = questions[qIndex].type === 'checkbox';

		questions = [...questions];

		if (isMulti) {
			if (correct.includes(oIndex)) {
				correct.splice(correct.indexOf(oIndex), 1);
			} else {
				correct.push(oIndex);
			}
		} else {
			questions[qIndex].correctAnswers = [oIndex];
		}
	}

	// ***************************** Take Test ***************************** //

	let testCode = '';
	let test = null;
	let answers = [];

	let submitted = false;
	let showExplanations = [];

	function enterTest(e) {
		e.preventDefault();
		const allTests = JSON.parse(localStorage.getItem('tests') || '[]');
		const match = allTests.find((t) => t.code === testCode.trim().toUpperCase());

		if (match) {
			test = match;
			answers = Array(test.questions.length).fill(null);
			showExplanations = Array(test.questions.length).fill(false);
			submitted = false;
		} else {
			alert('Test not found');
		}
	}

	function submitAnswers() {
		let correctCount = 0;
		submitted = true;

		test.questions.forEach((q, i) => {
			const user = answers[i];
			const correct = q.correctAnswers;

			if (q.type === 'radio') {
				if (parseInt(user) === correct[0]) correctCount++;
			} else if (q.type === 'checkbox') {
				const sortedUser = (user || []).sort();
				const sortedCorrect = correct.slice().sort();
				if (JSON.stringify(sortedUser) === JSON.stringify(sortedCorrect)) correctCount++;
			}
		});

		alert(`You scored ${correctCount}/${test.questions.length}`);
	}
</script>

<Header />

<section>
	{#if !join && !create}
		{#if $translations.landing !== undefined}
			<svg
				xmlns="http://www.w3.org/2000/svg"
				xmlns:xlink="http://www.w3.org/1999/xlink"
				version="1.1"
				x="0px"
				y="0px"
				class="svgImg"
				viewBox="0 0 500 500"
				style="enable-background:new 0 0 500 500;"
				xml:space="preserve"
			>
				<g id="BACKGROUND">
					<g>
						<rect style="fill:var(--background-color);" width="500" height="500" />
					</g>
				</g>
				<g id="OBJECTS">
					<path
						style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:6.1316;"
						d="   M102.642,416.43c-2.828,1.487-4.042,4.824-5.018,7.866c-3.974,12.392-7.039,28.234,3.008,36.504   c3.859,3.176,8.967,4.422,13.948,4.835c17.202,1.424,34.891-6.657,45.075-20.594c-0.651,5.393,2.95,10.626,7.651,13.348   c4.701,2.722,10.302,3.379,15.731,3.559c33.671,1.118,67.464-15.008,87.776-41.887"
					/>
					<path
						style="fill:#D5CBFB;"
						d="M251.912,64.812c-9.934-15.903-24.105-26.552-48.835-21.993   c-85.601,15.78-113.387,128.509-111.07,201.2c0.59,18.511,3.183,37.492,12.273,53.629c9.09,16.137,25.796,28.972,44.316,29.147   c23.503,0.222,42.258-18.598,58.02-36.033c-8.071,15.39-16.306,31.328-17.634,48.655c-1.328,17.327,6.081,36.562,21.894,43.77   c7.438,3.391,15.895,3.817,24.05,3.238c38.556-2.738,74.594-28.46,89.714-64.034c-10.256,14.545-3.168,36.574,11.649,46.444   c48.943,32.593,124.872-31.931,102.197-85.451c-18.218-43-33.837-51.135-1.976-93.647c19.989-26.672,13.684-70.233-16.023-87.569   c-39.808-23.23-69.026,23.504-102.099,37.235c-24.186,10.038-37.991-8.352-46.403-28.664   C265.763,95.72,260.375,78.36,251.912,64.812z"
					/>
					<polygon
						style="fill:#B97D33;"
						points="305.142,428.436 307.451,251.364 420.561,245.546 473.653,335.525 473.653,429.013  "
					/>
					<g>
						<g>
							<polygon points="305.922,428.197 431.071,428.85 428.913,272.097 308.04,273.537    " />
							<path
								d="M414.285,429.014l33.583-0.4l-1.667-139.929c-0.111-9.274-7.718-16.702-16.992-16.591l-16.792,0.2L414.285,429.014z"
							/>

							<line
								style="fill:none;stroke:#57929D;stroke-width:1.7102;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								x1="403.16"
								y1="274.181"
								x2="404.082"
								y2="428.197"
							/>

							<line
								style="fill:none;stroke:#57929D;stroke-width:1.7102;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								x1="415.618"
								y1="274.317"
								x2="415.618"
								y2="428.197"
							/>
							<rect x="415.451" y="318.718" style="fill:#57929D;" width="32.161" height="22.2" />
							<rect x="415.835" y="353.107" style="fill:#57929D;" width="31.958" height="9.141" />
							<rect x="416.271" y="365.948" style="fill:#57929D;" width="31.958" height="9.141" />

							<path
								style="fill:none;stroke:#57929D;stroke-width:1.7102;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M432.05,425.367L432.05,425.367c-2.574,0-4.679-2.106-4.679-4.679v-33.083c0-2.574,2.106-4.68,4.679-4.68l0,0     c2.574,0,4.68,2.106,4.68,4.68v33.083C436.73,423.261,434.624,425.367,432.05,425.367z"
							/>
						</g>
						<path
							style="fill:#FDF9F4;"
							d="M432.595,284.765h-90.76c-2.155,0-3.918-1.763-3.918-3.918l0,0c0-2.155,1.763-3.918,3.918-3.918    h90.76c2.155,0,3.918,1.763,3.918,3.918l0,0C436.512,283.002,434.749,284.765,432.595,284.765z"
						/>

						<line
							style="fill:none;stroke:#000000;stroke-width:1.8903;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
							x1="350.975"
							y1="281.5"
							x2="424.106"
							y2="281.5"
						/>
					</g>

					<path
						style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:6.1316;"
						d="   M154.592,192.582c-37.821-5.927-78.343,13.776-97.038,47.184"
					/>

					<path
						style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:6.1316;"
						d="   M475.103,392.841c-15.008,32.542-47.817,56.173-83.437,60.096"
					/>
					<g>
						<g>
							<path
								style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;"
								d="M217.201,87.833     c0.573-0.836,1.161-1.672,1.762-2.505"
							/>

							<path
								style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-dasharray:6.2245,6.2245;"
								d="     M222.728,80.373c11.285-14.112,26.457-26.815,43.648-31.798c16.076-4.659,33.996,0.394,34.867,19.462     c0.533,11.686-6.105,22.793-15.007,30.382c-1.015,0.866-2.139,1.729-3.464,1.879c-2.181,0.247-4.165-1.625-4.75-3.741     c-0.585-2.115-0.092-4.371,0.556-6.468c3.609-11.676,11.948-21.485,21.852-28.646c8.235-5.955,17.531-10.232,27.074-13.79"
							/>
							<path
								style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;"
								d="M330.433,46.584     c0.964-0.344,1.93-0.682,2.896-1.015"
							/>
						</g>
					</g>
					<g>
						<g>
							<g>
								<path
									style="fill:#94DBD2;"
									d="M189.91,139.392h-4.607c-0.329-0.764-0.707-1.502-1.13-2.21l2.776-3.355      c0.243-0.294,0.202-0.733-0.092-0.976l-7.292-6.035c-0.294-0.243-0.733-0.202-0.976,0.092l-2.431,2.937      c-0.986-0.477-2.02-0.87-3.093-1.17l0,0v-3.845c0-0.381-0.312-0.693-0.693-0.693h-9.466c-0.381,0-0.693,0.312-0.693,0.693v4.036      c-1.067,0.34-2.093,0.773-3.069,1.289l-2.688-3.248c-0.243-0.294-0.682-0.335-0.976-0.092l-7.292,6.035      c-0.294,0.243-0.335,0.682-0.092,0.976l3.292,3.978c0,0,0,0,0,0c-0.281,0.515-0.54,1.044-0.773,1.586h-6.265      c-0.381,0-0.693,0.312-0.693,0.693v9.466c0,0.381,0.312,0.693,0.693,0.693h5.036c0.327,1.8,0.908,3.511,1.707,5.094c0,0,0,0,0,0      l-3.782,4.57c-0.243,0.294-0.202,0.733,0.092,0.976l7.292,6.035c0.294,0.243,0.733,0.201,0.976-0.092l2.951-3.566      c1.129,0.645,2.331,1.175,3.591,1.577v5.042c0,0.381,0.312,0.693,0.693,0.693h9.466c0.381,0,0.693-0.312,0.693-0.693v-4.851l0,0      c1.368-0.383,2.673-0.917,3.897-1.582c0,0,0,0,0,0l2.797,3.38c0.243,0.294,0.682,0.335,0.976,0.092l7.293-6.035      c0.294-0.243,0.335-0.682,0.092-0.976l-3.482-4.208l0,0c0.895-1.683,1.543-3.518,1.894-5.456h3.379      c0.381,0,0.693-0.312,0.693-0.693v-9.466C190.603,139.704,190.292,139.392,189.91,139.392z M167.959,156.082      c-5.097,0-9.229-4.132-9.229-9.229c0-5.097,4.132-9.23,9.229-9.23c5.097,0,9.23,4.133,9.23,9.23      C177.188,151.951,173.056,156.082,167.959,156.082z"
								/>
							</g>

							<circle
								style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:6.1316;"
								cx="168.372"
								cy="146.863"
								r="14.318"
							/>
						</g>
						<path
							style="fill:#94DBD2;"
							d="M173.565,146.863c0,2.868-2.325,5.194-5.194,5.194c-2.868,0-5.194-2.325-5.194-5.194    s2.325-5.194,5.194-5.194C171.24,141.669,173.565,143.995,173.565,146.863z"
						/>
					</g>

					<ellipse
						transform="matrix(0.6096 -0.7927 0.7927 0.6096 82.1333 315.502)"
						style="fill:#D5CBFB;"
						cx="361.377"
						cy="74.366"
						rx="24.815"
						ry="19.621"
					/>
					<g>
						<g>
							<g>
								<path
									style="fill:#9792FB;"
									d="M261.059,189.365h-9.093c-0.649-1.508-1.395-2.964-2.231-4.362l5.479-6.62      c0.48-0.58,0.398-1.446-0.182-1.926l-14.393-11.911c-0.58-0.479-1.446-0.398-1.926,0.182l-4.797,5.797      c-1.946-0.941-3.988-1.717-6.104-2.308l0,0v-7.589c0-0.752-0.616-1.368-1.368-1.368h-18.682c-0.753,0-1.368,0.616-1.368,1.368      v7.966c-2.107,0.671-4.131,1.527-6.056,2.544l-5.305-6.41c-0.48-0.58-1.347-0.662-1.926-0.182l-14.393,11.911      c-0.58,0.479-0.662,1.346-0.182,1.926l6.497,7.852c0,0,0,0,0,0c-0.556,1.016-1.066,2.06-1.526,3.131h-12.365      c-0.753,0-1.368,0.616-1.368,1.368v18.682c0,0.752,0.615,1.368,1.368,1.368h9.94c0.645,3.552,1.792,6.929,3.368,10.053      c0,0,0,0,0,0.001l-7.465,9.02c-0.48,0.58-0.398,1.446,0.182,1.926l14.393,11.911c0.58,0.48,1.447,0.398,1.926-0.182l5.824-7.037      c2.229,1.272,4.601,2.319,7.087,3.112v9.952c0,0.753,0.616,1.368,1.368,1.368h18.682c0.752,0,1.368-0.616,1.368-1.368v-9.574      l0,0c2.701-0.756,5.276-1.81,7.691-3.123c0,0,0,0,0,0l5.521,6.671c0.48,0.579,1.346,0.661,1.926,0.182l14.393-11.911      c0.579-0.48,0.661-1.346,0.181-1.926l-6.872-8.305l0,0c1.767-3.322,3.045-6.944,3.738-10.769h6.669      c0.752,0,1.368-0.616,1.368-1.368v-18.682C262.426,189.981,261.811,189.365,261.059,189.365z M217.734,222.306      c-10.06,0-18.215-8.155-18.215-18.216c0-10.06,8.155-18.216,18.215-18.216c10.06,0,18.216,8.156,18.216,18.216      C235.95,214.151,227.794,222.306,217.734,222.306z"
								/>
							</g>

							<ellipse
								transform="matrix(0.1913 -0.9815 0.9815 0.1913 -23.5958 379.5827)"
								style="fill:none;stroke:#000000;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:6.1316;"
								cx="218.549"
								cy="204.11"
								rx="28.258"
								ry="28.258"
							/>
						</g>
						<circle style="fill:#9792FB;" cx="217.211" cy="204.272" r="9.522" />
					</g>
					<g>
						<polygon
							style="fill:#E9BC46;"
							points="231.852,427.907 234.16,250.835 350.156,250.835 400.363,334.995 400.363,428.484   "
						/>

						<polyline
							style="fill:none;stroke:#000000;stroke-width:1.6707;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
							points="    235.891,256.51 343.23,256.51 394.592,338.458 394.592,427.907   "
						/>

						<path
							style="fill:none;stroke:#FFFFFF;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
							d="    M234.16,277.286c0,0,49.63-16.736,60.595,51.938c0,0,72.714-45.59,82.524,99.26"
						/>
					</g>
					<g>
						<g>
							<path
								d="M65.104,422.042L35.32,319.925c-3.155-10.818,4.825-21.676,15.932-21.676h162c6.722,0,12.782,4.114,15.353,10.423     l35.738,87.698c4.565,11.202-3.632,23.494-15.565,23.335C192.275,418.954,60.798,417.666,65.104,422.042z"
							/>

							<path
								style="fill:#D5CBFB;stroke:#57929D;stroke-width:1.5115;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M73.382,414.305l-26.99-90.77c-2.859-9.616,4.372-19.267,14.437-19.267h146.802c6.091,0,11.583,3.657,13.913,9.265l32.385,77.954     c4.136,9.957-3.291,20.884-14.105,20.742C188.622,411.56,69.479,410.416,73.382,414.305z"
							/>
							
							<path
								style="fill:#7B70EE;"
								d="M331.489,427.475H73.383c-4.553,0-8.279-3.725-8.279-8.279v0c0-4.553,3.726-8.279,8.279-8.279     h258.106c4.553,0,8.279,3.725,8.279,8.279l0,0C339.768,423.749,336.042,427.475,331.489,427.475z"
							/>
							<path
								style="fill:#7B70EE;"
								d="M155.975,387.769L155.975,387.769c-17.395,0-31.628-14.233-31.628-31.628v0     c0-17.395,14.233-31.628,31.628-31.628l0,0c17.396,0,31.628,14.233,31.628,31.628v0     C187.603,373.536,173.37,387.769,155.975,387.769z"
							/>
							<polygon
								style="fill:#FCF7F2;"
								points="149.144,369.159 148.922,357.567 148.7,345.974 158.851,351.578 169.001,357.183      159.072,363.171    "
							/>
							<path
								style="fill:none;stroke:#000000;stroke-width:0.474;stroke-miterlimit:10;"
								d="M94.629,422.11H74.571     c-1.512,0-2.75-1.237-2.75-2.75v-0.491c0-1.512,1.237-2.75,2.749-2.75h20.059c1.512,0,2.75,1.237,2.75,2.75v0.491     C97.379,420.872,96.142,422.11,94.629,422.11z"
							/>
							<path
								style="fill:none;stroke:#000000;stroke-width:0.474;stroke-miterlimit:10;"
								d="M301.759,421.348h-6.424     c-1.178,0-2.141-0.964-2.141-2.141l0,0c0-1.178,0.964-2.141,2.141-2.141h6.424c1.178,0,2.141,0.964,2.141,2.141l0,0     C303.9,420.384,302.937,421.348,301.759,421.348z"
							/>
							<path
								style="fill:none;stroke:#000000;stroke-width:0.474;stroke-miterlimit:10;"
								d="M318.354,420.812h-6.424     c-1.178,0-2.141-0.964-2.141-2.141l0,0c0-1.178,0.964-2.141,2.141-2.141h6.424c1.178,0,2.141,0.964,2.141,2.141l0,0     C320.496,419.849,319.532,420.812,318.354,420.812z"
							/>
						</g>

						<path
							style="fill:none;stroke:#57929D;stroke-width:1.5115;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
							d="    M58.18,358.713c0,0,52.999,1.606,57.817-52.999"
						/>

						<path
							style="fill:none;stroke:#57929D;stroke-width:1.4909;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
							d="    M232.215,341.151c-20.7,7.852-8.939,42.398-8.939,42.398l0,0c-13.662-2.73-27.933,4.73-33.031,17.763    c-1.39,3.554-2.075,7.387-1.919,11.204"
						/>
					</g>
					<path
						style="fill:none;stroke:#000000;stroke-width:2.0171;stroke-miterlimit:10;"
						d="M58.144,428.187   c136.476-0.37,273.94,1.286,410.892,0.367"
					/>
					<path
						style="fill:none;stroke:#E176CB;stroke-width:2.0439;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M480.578,282.48c0,0,3.462,23.661-24.815,49.053"
					/>
					<path
						style="fill:none;stroke:#E176CB;stroke-width:2.0439;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M135.628,286.049c12.306-2.991,22.274-13.942,24.098-26.474c0.615-4.224-0.366-9.603-4.448-10.85   c-2.71-0.828-5.747,0.756-7.242,3.163c-1.495,2.407-1.689,5.423-1.284,8.228c1.201,8.324,7.342,15.417,14.867,19.173   c7.525,3.757,16.256,4.51,24.625,3.677"
					/>
					<path
						style="fill:none;stroke:#E9BC46;stroke-width:2.0439;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M376.703,40.433c16.195,1,30.253,16.013,30.186,32.239c18.776-0.542,36.616,15.044,38.6,33.722"
					/>
					<path
						style="fill:none;stroke:#2D201B;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M115.856,261.127c0,3.187-2.584,5.771-5.771,5.771c-3.187,0-5.771-2.584-5.771-5.771c0-3.187,2.584-5.771,5.771-5.771   C113.272,255.356,115.856,257.94,115.856,261.127z"
					/>
					<path
						style="fill:none;stroke:#2D201B;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M126.161,60.437c0,3.187-2.584,5.771-5.771,5.771s-5.771-2.584-5.771-5.771c0-3.187,2.584-5.771,5.771-5.771   S126.161,57.25,126.161,60.437z"
					/>

					<circle
						style="fill:none;stroke:#2D201B;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						cx="296.775"
						cy="354.905"
						r="5.771"
					/>
					<path
						style="fill:none;stroke:#E9BC46;stroke-width:2.0439;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M83.316,242.052c-4.678,7.419-6.885,16.121-8.331,24.772c-1.873,11.204-2.576,22.748-0.364,33.89   c2.212,11.142,7.537,21.908,16.204,29.252"
					/>
					<path
						style="fill:#2D201B;"
						d="M122.781,240.352c0,2.55-2.067,4.617-4.617,4.617c-2.55,0-4.617-2.067-4.617-4.617   c0-2.55,2.067-4.617,4.617-4.617C120.714,235.735,122.781,237.802,122.781,240.352z"
					/>
					<path
						style="fill:#2D201B;"
						d="M318.415,338.458c0,2.55-2.067,4.617-4.617,4.617c-2.55,0-4.617-2.067-4.617-4.617   c0-2.55,2.067-4.617,4.617-4.617C316.349,333.841,318.415,335.908,318.415,338.458z"
					/>
					<path
						style="fill:#2D201B;"
						d="M466.728,187.26c0,2.55-2.067,4.617-4.617,4.617c-2.55,0-4.617-2.067-4.617-4.617   c0-2.55,2.067-4.617,4.617-4.617C464.661,182.643,466.728,184.71,466.728,187.26z"
					/>
					<path
						style="fill:#2D201B;"
						d="M159.715,97.81c0,1.594-1.292,2.885-2.885,2.885s-2.885-1.292-2.885-2.885   c0-1.594,1.292-2.885,2.885-2.885S159.715,96.217,159.715,97.81z"
					/>

					<ellipse
						transform="matrix(0.2287 -0.9735 0.9735 0.2287 92.7362 218.0217)"
						style="fill:none;stroke:#2D201B;stroke-width:1.5329;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						cx="183.953"
						cy="50.489"
						rx="10.965"
						ry="10.965"
					/>
					<path
						style="fill:#2D201B;"
						d="M151.636,40.678c0,1.912-1.55,3.462-3.463,3.462c-1.912,0-3.462-1.55-3.462-3.462   s1.55-3.463,3.462-3.463C150.086,37.215,151.636,38.766,151.636,40.678z"
					/>
					<g>
						<g>
							<g>
								<g>
									
									<polygon
										style="fill:#2525AD;stroke:#2525AD;stroke-width:0.6146;stroke-miterlimit:10;"
										points="270.607,251.317        420.561,251.317 420.019,147.965 270.066,147.965      "
									/>
									<path
										d="M301.177,195.986c12.512,0.012,25.007-1.743,36.937-5.558c11.489-3.674,22.309-9.27,31.999-16.447       c9.823-7.276,18.417-16.193,25.675-26.015H270.066v44.644C280.295,194.753,290.715,195.976,301.177,195.986z"
									/>
									<polygon
										style="fill:#2525AD;stroke:#2525AD;stroke-width:0.5374;stroke-miterlimit:10;"
										points="338.002,101.61        475.385,136.073 340.206,170.535 208.7,136.073      "
									/>
								</g>

								<polyline
									style="fill:none;stroke:#C59A40;stroke-width:3.1814;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
									points="      441.376,245.852 441.376,152.485 359.227,133.065     "
								/>
								<circle style="fill:#C59A40;" cx="442.403" cy="208.473" r="8.392" />
							</g>

							<path
								style="fill:none;stroke:#57929D;stroke-width:2.8195;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M325.288,105.783c2.932,10.163,0.094,21.374-5.692,30.229c-5.786,8.855-14.251,15.635-23.141,21.365"
							/>

							<path
								style="fill:none;stroke:#57929D;stroke-width:2.8195;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M270.214,200.983c14.138,4.415,29.734,27.25,30.311,47.448"
							/>

							<path
								style="fill:none;stroke:#57929D;stroke-width:2.8195;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M332.266,247.854c2.885-24.238,17.971-45.705,32.938-53.186c5.159-2.579,12.335-5.661,18.083-3.432     c3.314,1.286,5.918,3.783,6.537,7.389c0.756,4.405-1.105,8.828-3.734,12.28c-2.01,2.639-6.62,8.005-9.917,4.068     c-0.464-0.554-0.697-1.266-0.842-1.975c-1.972-9.581,8.172-17.209,13.898-23.241c8.745-9.212,19.456-16.908,30.622-22.914"
							/>
						</g>
						<g>
							<path
								style="fill:#DA9F4B;"
								d="M454.519,250.319c0.99-6.015,1.303-12.142,0.932-18.226c-0.39-6.38-1.951-13.406-7.204-17.049     c-2.138-1.483-4.945-2.25-7.385-1.344c-2.835,1.052-4.51,4.119-4.841,7.125c-0.331,3.006,0.424,6.011,1.097,8.96     c2.085,9.143,3.209,19.497-2.104,27.224C440.399,253.321,448.084,251.403,454.519,250.319z"
							/>

							<path
								style="fill:none;stroke:#DA9F4B;stroke-width:1.2009;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M452.228,221.623c-1.176-4.933-7.508-8.88-12.399-7.334c-10.923,3.451-4.06,19.291-3.907,26.936     c0.122,6.07-0.653,12.342-3.672,17.609"
							/>

							<path
								style="fill:none;stroke:#000000;stroke-width:0.8006;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
								d="     M447.011,250.042c3.494-8.194,3.98-17.632,1.344-26.141c-1.166-3.764-3.041-7.49-6.236-9.797     c7.452,9.628,6.745,24.62,0.686,35.18"
							/>
						</g>
						<path
							style="fill:#E9BC46;"
							d="M364.006,130.704c0,3.187-4.651,5.771-10.388,5.771c-5.737,0-10.388-2.584-10.388-5.771    c0-3.187,4.651-5.771,10.388-5.771C359.355,124.934,364.006,127.517,364.006,130.704z"
						/>
					</g>
					<path
						style="fill:none;stroke:#94DBD2;stroke-width:2.1597;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;"
						d="   M196.045,326.753c15.162-3.873,31.631-0.438,45.175,7.402c13.543,7.84,24.358,19.786,32.795,32.965   c-4.092-26.452,10.155-53.194,33.531-66.232"
					/>
				</g>
			</svg>
			<div class="buttons">
				<button class="createBtn" onclick={() => (create = true)}>Create class</button>
				<button class="joinBtn" onclick={() => (join = true)}>Join class</button>
			</div>
		{/if}
	{/if}

	<!-- svelte-ignore a11y_click_events_have_key_events -->
	{#if join && test === null}
		<svg
			xmlns="http://www.w3.org/2000/svg"
			xmlns:xlink="http://www.w3.org/1999/xlink"
			version="1.1"
			class="svgImg"
			x="0px"
			y="0px"
			viewBox="20 64 460 370"
			style="enable-background:new 0 0 500 500;"
			xml:space="preserve"
		>
			<g id="Background">
				<rect id="XMLID_1_" style="fill:#FFFFFF;" width="500" height="500" />
				<rect style="fill:var(--background-color);" width="500" height="500" />
			</g>
			<g id="Objects">
				<rect x="139.689" y="78.491" style="fill:#7E5BB5;" width="1.68" height="0" />
				<g>
					<circle style="fill:var(--background-color);" cx="250" cy="250" r="171.53" />
					<g>
						<path
							style="fill:#F5F4F9;"
							d="M296.905,357.733c0,3.706-23.592,6.711-52.694,6.711s-52.694-3.005-52.694-6.711     c0-3.706,23.592-6.711,52.694-6.711S296.905,354.027,296.905,357.733z"
						/>
						<g>
							<path
								style="fill:#FBFAFF;"
								d="M179.435,358.059c-0.551,0-1.087,0.057-1.61,0.152c-2.156-8.268-9.651-14.379-18.594-14.379      c-5.553,0-10.542,2.367-14.053,6.13c-3.081-4.633-8.344-7.69-14.325-7.69c-2.426-10.866-12.12-18.99-23.717-18.99      c-13.425,0-24.308,10.883-24.308,24.308c0,1.002,0.068,1.988,0.186,2.958c-2.093-1.246-4.53-1.974-7.143-1.974      c-4.83,0-9.088,2.445-11.606,6.164c-1.122-0.401-2.326-0.631-3.586-0.631c-5.759,0-10.441,4.567-10.65,10.275h137.946      C186.859,360.722,183.459,358.059,179.435,358.059z"
							/>
						</g>
						<g>
							<path
								style="fill:#E0D2FF;"
								d="M452.919,258.288c-0.88,0-1.725,0.147-2.518,0.408c-1.127-5.743-6.184-10.078-12.258-10.078      c-1.462,0-2.859,0.264-4.163,0.725c-1.986-8.082-9.277-14.078-17.972-14.078c-9.851,0-17.901,7.696-18.474,17.403      c-0.827-0.233-1.695-0.366-2.596-0.366c-3.899,0-7.246,2.338-8.732,5.686c-0.977-0.508-2.085-0.8-3.263-0.8      c-3.915,0-7.089,3.174-7.089,7.089c0,0.154,0.013,0.305,0.023,0.457h84.921C460.059,261.058,456.813,258.288,452.919,258.288z"
							/>
						</g>
						<g>
							<g>
								<g>
									<polygon
										style="fill:#B3A5E5;"
										points="268.593,328.455 218.826,328.455 217.243,332.509 270.177,332.509       "
									/>
									<path
										style="fill:#CABAF7;"
										d="M270.177,332.509h-52.934l-7.51,19.226c-1.093,2.798,0.97,5.818,3.974,5.818h29.596h0.815        h29.596c3.003,0,5.066-3.021,3.974-5.818L270.177,332.509z"
									/>
								</g>
								<path
									style="fill:#CABAF7;"
									d="M367.151,164.454c0-3.191-2.587-5.778-5.778-5.778H126.047c-3.191,0-5.778,2.587-5.778,5.778       v142.177h246.883V164.454z"
								/>
								<path
									style="fill:#392C70;"
									d="M120.268,306.631v16.046c0,3.191,2.587,5.778,5.778,5.778h235.326       c3.191,0,5.778-2.587,5.778-5.778v-16.046H120.268z"
								/>
								<path
									style="fill:#7E5BB5;"
									d="M248.484,315.8c0,2.637-2.137,4.774-4.774,4.774s-4.774-2.137-4.774-4.774       c0-2.637,2.137-4.774,4.774-4.774S248.484,313.164,248.484,315.8z"
								/>
								<rect
									x="130.726"
									y="169.322"
									style="fill:#FFFFFF;"
									width="225.968"
									height="125.942"
								/>
							</g>
							<g>
								<g>
									<path
										style="fill:#FBFAFF;"
										d="M151.993,186.441v94.057c0,1.873,1.519,3.392,3.392,3.392h176.65        c1.873,0,3.392-1.518,3.392-3.392v-94.057H151.993z"
									/>
									<path
										style="fill:#FFF2B0;"
										d="M335.427,181.322c0-1.873-1.519-3.392-3.392-3.392h-176.65c-1.873,0-3.392,1.519-3.392,3.392        v7.414h183.434V181.322z"
									/>
								</g>
								<g>
									<circle style="fill:#FFD652;" cx="312.151" cy="183.29" r="2.136" />
									<path
										style="fill:#FFD652;"
										d="M321.188,183.29c0,1.18-0.956,2.136-2.136,2.136c-1.179,0-2.135-0.956-2.135-2.136        c0-1.179,0.956-2.136,2.135-2.136C320.232,181.154,321.188,182.111,321.188,183.29z"
									/>
									<circle style="fill:#FFD652;" cx="325.953" cy="183.29" r="2.136" />
								</g>
							</g>
							<g>
								<g>
									<g>
										<path
											style="fill:#E24BB4;"
											d="M249.7,222.853h-25.449c-1.648,0-2.997,1.349-2.997,2.997v26.339         C221.645,244.863,225.113,226.505,249.7,222.853z"
										/>
										<path
											style="fill:#CC3B98;"
											d="M263.169,222.853h-9.936H249.7c-24.587,3.652-28.055,22.01-28.446,29.336v0.031         c0,0.821,0.336,1.568,0.876,2.111c0.544,0.546,1.294,0.886,2.121,0.886h38.918c1.648,0,2.997-1.348,2.997-2.997v-26.37         C266.165,224.202,264.817,222.853,263.169,222.853z"
										/>
									</g>
									<polygon
										style="fill:#FFFFFF;"
										points="250.636,238.944 244.759,242.337 238.882,245.73 238.882,238.944 238.882,232.158         244.759,235.551       "
									/>
								</g>
								<g>
									<rect
										x="210.946"
										y="195.39"
										style="fill:#FFD652;"
										width="65.528"
										height="21.024"
									/>
									<text
										transform="matrix(1 0 0 1 216.7204 210.2832)"
										style="fill:#FFFFFF; font-family:'Bebas'; font-size:10.1151px;"
										>online test</text
									>
								</g>
								<g>
									<rect
										x="195.636"
										y="260.973"
										style="fill:#E0D2FF;"
										width="96.147"
										height="2.821"
									/>
									<rect
										x="195.636"
										y="266.99"
										style="fill:#E0D2FF;"
										width="96.147"
										height="2.821"
									/>
									<rect
										x="195.636"
										y="273.006"
										style="fill:#E0D2FF;"
										width="96.147"
										height="2.821"
									/>
								</g>
							</g>
						</g>
						<g>
							<path
								style="fill:#543C8E;"
								d="M379.876,384.491h-59.892c-5.693,0-10.307-4.615-10.307-10.307V247.868      c0-5.692,4.615-10.307,10.307-10.307h59.892c5.692,0,10.307,4.615,10.307,10.307v126.316      C390.183,379.877,385.568,384.491,379.876,384.491z"
							/>
							<path
								style="fill:#FFFFFF;"
								d="M376.869,241.766h-10.181v3.525c0,0.662-0.537,1.199-1.199,1.199h-28.541      c-0.662,0-1.199-0.537-1.199-1.199v-3.525H322.99c-4.674,0-8.464,3.79-8.464,8.464v120.035c0,5.03,4.078,9.108,9.108,9.108      h52.592c5.03,0,9.108-4.078,9.108-9.108V250.23C385.333,245.556,381.544,241.766,376.869,241.766z"
							/>
							<rect x="322.317" y="256.717" style="fill:#E254A8;" width="55.225" height="11.552" />
							<rect x="322.317" y="272.111" style="fill:#F5F4F9;" width="55.225" height="93.47" />
						</g>
						<g>
							<g>
								<path
									style="fill:#FFF2B0;"
									d="M425.586,285.601h-80.557c-1.197,3.084-3.612,5.557-6.664,6.818v52.923       c3.052,1.26,5.467,3.734,6.664,6.818h80.557c1.197-3.084,3.612-5.557,6.664-6.818v-52.923       C429.198,291.158,426.783,288.685,425.586,285.601z"
								/>
								<path
									style="fill:#FFD652;"
									d="M424.758,281.226h-78.901h-12.109v12.109v51.091v12.109h12.109h78.901h12.109v-12.109v-51.091       v-12.109H424.758z M432.25,345.342c-3.052,1.26-5.467,3.734-6.664,6.818h-80.557c-1.197-3.084-3.612-5.557-6.664-6.818v-52.923       c3.052-1.26,5.467-3.734,6.664-6.818h80.557c1.197,3.084,3.612,5.557,6.664,6.818V345.342z"
								/>
							</g>
							<rect x="349.685" y="296.259" style="fill:#FFD652;" width="71.246" height="4.687" />
							<g>
								<rect x="343.847" y="308.823" style="fill:#FFFFFF;" width="80.933" height="2.477" />
								<rect x="343.847" y="315.645" style="fill:#FFFFFF;" width="80.933" height="2.477" />
								<rect x="343.847" y="322.467" style="fill:#FFFFFF;" width="80.933" height="2.477" />
								<rect x="343.847" y="329.288" style="fill:#FFFFFF;" width="29.061" height="2.477" />
							</g>
							<g>
								<g>
									<g>
										<path
											style="fill:#E254A8;"
											d="M405.169,354.952c-1.289-0.419-2.13-1.612-2.093-2.967c0.011-0.395-0.236-0.617-0.342-0.695         c-0.106-0.077-0.395-0.243-0.766-0.11c-0.026,0.009-0.053,0.013-0.08,0.021l-3.352,11.025l4.311-1.977l2.481,4.042         l3.145-10.346C407.688,354.94,406.392,355.348,405.169,354.952z"
										/>
										<path
											style="fill:#E254A8;"
											d="M415.848,351.291c-0.106,0.077-0.353,0.3-0.342,0.696c0.038,1.354-0.803,2.547-2.093,2.966         c-0.314,0.102-0.634,0.151-0.949,0.151c-0.907,0-1.77-0.413-2.353-1.148l3.142,10.336l2.482-4.042l4.311,1.977l-3.352-11.025         c-0.026-0.009-0.053-0.012-0.08-0.021C416.245,351.047,415.955,351.212,415.848,351.291z"
										/>
										<path
											style="fill:#CC3B98;"
											d="M409.28,351.222c-0.996,0.004-1.926,0.495-2.489,1.317c-0.326,0.475-0.803,0.365-0.942,0.32         c-0.138-0.045-0.589-0.236-0.573-0.813c0.028-1-0.439-1.948-1.249-2.536c-0.434-0.316-0.938-0.501-1.456-0.557l-0.683,2.248         c0.026-0.009,0.053-0.012,0.08-0.021c0.372-0.133,0.66,0.033,0.766,0.11c0.106,0.077,0.353,0.3,0.342,0.695         c-0.038,1.355,0.803,2.548,2.093,2.967c1.223,0.396,2.52-0.012,3.306-1.007l0.817-2.687L409.28,351.222z"
										/>
										<path
											style="fill:#CC3B98;"
											d="M414.555,349.511c-0.809,0.587-1.276,1.536-1.249,2.536c0.016,0.576-0.435,0.767-0.573,0.812         c-0.139,0.045-0.617,0.155-0.942-0.32c-0.563-0.822-1.493-1.314-2.489-1.317l-0.011,0.037l0.82,2.697         c0.583,0.734,1.447,1.148,2.353,1.148c0.315,0,0.635-0.049,0.949-0.151c1.289-0.419,2.13-1.612,2.093-2.966         c-0.011-0.395,0.236-0.618,0.342-0.696c0.107-0.078,0.397-0.243,0.766-0.11c0.026,0.009,0.053,0.013,0.08,0.021l-0.684-2.248         C415.493,349.01,414.99,349.195,414.555,349.511z"
										/>
										<polygon
											style="fill:#D19000;"
											points="409.28,351.222 409.291,351.259 409.302,351.222 409.291,351.221        "
										/>
									</g>
									<path
										style="fill:#FFD652;"
										d="M420.145,340.414c-1.302-0.383-1.812-1.954-0.984-3.03c1.174-1.526-0.363-3.642-2.177-2.996        l0,0c-1.278,0.455-2.615-0.516-2.577-1.872c0.053-1.924-2.435-2.733-3.523-1.145c-0.767,1.119-2.419,1.119-3.185,0l0,0        c-1.088-1.588-3.576-0.78-3.523,1.145c0.038,1.356-1.299,2.327-2.577,1.872c-1.814-0.645-3.351,1.471-2.177,2.996        c0.828,1.075,0.317,2.646-0.984,3.03c-1.847,0.544-1.847,3.16,0,3.704l0,0c1.301,0.383,1.812,1.954,0.984,3.03v0        c-1.174,1.526,0.363,3.642,2.177,2.996c1.278-0.455,2.615,0.516,2.577,1.872c-0.053,1.924,2.435,2.733,3.523,1.145l0,0        c0.767-1.119,2.419-1.119,3.185,0l0,0c1.088,1.588,3.576,0.78,3.523-1.145c-0.038-1.356,1.299-2.327,2.577-1.872l0,0        c1.814,0.645,3.351-1.471,2.177-2.996v0c-0.827-1.075-0.317-2.646,0.984-3.03l0,0        C421.992,343.573,421.992,340.958,420.145,340.414z"
									/>
								</g>

								<ellipse
									transform="matrix(0.2533 -0.9674 0.9674 0.2533 -25.5008 651.4919)"
									style="fill:#E5A300;"
									cx="409.291"
									cy="342.266"
									rx="9.009"
									ry="9.009"
								/>
							</g>
						</g>
						<g>
							<path
								style="fill:#FFF2B0;"
								d="M155.763,276.069h-48.21v55.547h8.384v8.384h39.826V276.069z M150.785,326.9h-38.254v-3.029      h38.254V326.9z M150.785,317.308h-38.254v-3.029h38.254V317.308z M150.785,307.716h-38.254v-3.029h38.254V307.716z       M150.785,298.123h-38.254v-3.029h38.254V298.123z M150.785,288.531h-38.254v-3.029h38.254V288.531z"
							/>
							<rect x="112.531" y="285.502" style="fill:#FFD652;" width="38.254" height="3.029" />
							<rect x="112.531" y="295.094" style="fill:#FFD652;" width="38.254" height="3.029" />
							<rect x="112.531" y="304.686" style="fill:#FFD652;" width="38.254" height="3.029" />
							<rect x="112.531" y="314.279" style="fill:#FFD652;" width="38.254" height="3.029" />
							<rect x="112.531" y="323.871" style="fill:#FFD652;" width="38.254" height="3.029" />
							<polygon
								style="fill:#FFD652;"
								points="107.553,331.616 115.937,340.001 115.937,331.616     "
							/>
						</g>
						<path style="fill:#543C8E;" d="M382.919,234.191" />
						<g>
							<g>
								<path
									style="fill:#392C70;"
									d="M349.385,199.367c-9.221-0.184-19.107-1.536-27.458-4.484l27.171,14.19v-8.04       C349.098,200.466,349.202,199.911,349.385,199.367z"
								/>
								<path
									style="fill:#392C70;"
									d="M416.795,201.032v8.04l27.171-14.19c-8.352,2.949-18.238,4.301-27.459,4.484       C416.691,199.911,416.795,200.466,416.795,201.032z"
								/>
							</g>
							<g>
								<path
									style="fill:#9676D3;"
									d="M363.853,190.513c-7.815,1.968-13.215,5.135-14.467,8.854c-0.183,0.544-0.288,1.099-0.288,1.665       v8.04v14.605l0.592-0.181c2.477-0.765,4.992-1.208,7.501-1.376c0-3.862,0-9.471,0-16.736       C357.19,198.288,360.44,193.544,363.853,190.513z"
								/>
								<path
									style="fill:#7E5BB5;"
									d="M416.507,199.367c-2.102-6.241-15.882-10.93-33.164-11.001v-0.004h-0.397h-0.397v0.004       c-6.985,0.029-13.396,0.812-18.697,2.147c-3.412,3.031-6.662,7.775-6.662,14.871c0,7.265,0,12.874,0,16.736       c9.346-0.628,18.594,2.785,25.359,9.665l0.397,0.399l0.397-0.399c8.582-8.727,21.159-11.907,32.861-8.288l0.591,0.182v-14.606       v-8.04C416.795,200.466,416.691,199.911,416.507,199.367z"
								/>
							</g>
							<g>
								<path
									style="fill:#543C8E;"
									d="M443.522,193.064l-60.575-25.714l-60.577,25.716l-1.668,0.871c-0.124,0.065-0.124,0.242,0,0.306       l1.226,0.64c8.352,2.949,18.237,4.301,27.458,4.484c2.102-6.241,15.882-10.93,33.165-11.001v-0.004h0.397h0.397v0.004       c17.281,0.071,31.062,4.76,33.164,11.001c9.221-0.184,19.107-1.536,27.459-4.484l1.225-0.64c0.124-0.065,0.124-0.242,0-0.306       L443.522,193.064z"
								/>
								<path
									style="fill:#634FA3;"
									d="M443.522,193.064l-29.175-15.238l-28.499-14.674c-2.047-1.054-4.193-1.048-5.993-0.107       l-28.066,14.657l-29.419,15.363l60.577-25.716L443.522,193.064z"
								/>
							</g>
							<g>
								<polygon
									style="fill:#FFD652;"
									points="422.44,242.98 420.489,242.98 420.489,181.056 422.44,182.073      "
								/>
								<g>
									<path
										style="fill:#E5A300;"
										d="M422.651,239.954h-2.373c-0.407,0-0.74-0.333-0.74-0.74l0,0c0-0.407,0.333-0.74,0.74-0.74        h2.373c0.407,0,0.74,0.333,0.74,0.74l0,0C423.391,239.621,423.058,239.954,422.651,239.954z"
									/>
									<path
										style="fill:#E5A300;"
										d="M422.651,241.435h-2.373c-0.407,0-0.74-0.333-0.74-0.74l0,0c0-0.407,0.333-0.74,0.74-0.74        h2.373c0.407,0,0.74,0.333,0.74,0.74l0,0C423.391,241.102,423.058,241.435,422.651,241.435z"
									/>
								</g>
								<path
									style="fill:#E5A300;"
									d="M422.488,240.953c-0.052-0.05-0.11-0.089-0.177-0.116c-0.034-0.14-0.129-0.266-0.265-0.348       c-0.164-0.097-0.357-0.116-0.526-0.052c-0.035-0.005-0.08-0.005-0.108,0c-0.168-0.064-0.364-0.045-0.527,0.052       c-0.136,0.081-0.232,0.207-0.265,0.348c-0.067,0.027-0.125,0.066-0.177,0.116c-3.63,3.506-3.804,8.611-3.662,13.974       c0.006,0.238,0.103,0.426,0.266,0.514c0.122,0.067,0.269,0.065,0.389-0.009c0.151-0.093,0.234-0.279,0.228-0.512       c-0.065-2.488-0.032-5.096,0.561-7.534c-0.092,1.242-0.076,2.517-0.062,3.762c0.018,1.518,0.035,2.951-0.125,4.314       c-0.035,0.3,0.089,0.443,0.167,0.5c0.108,0.081,0.25,0.094,0.384,0.039c0.179-0.077,0.304-0.269,0.332-0.512       c0.146-1.244,0.15-2.561,0.155-3.956c0.006-2.148,0.014-4.357,0.57-6.333c-0.205,1.663-0.128,3.389-0.053,5.07       c0.085,1.906,0.173,3.876-0.153,5.726c-0.045,0.254,0.024,0.487,0.185,0.622c0.111,0.093,0.25,0.121,0.375,0.078       c0.086-0.031,0.236-0.126,0.286-0.412c0.315-1.784,0.271-3.702,0.23-5.557c-0.052-2.279-0.104-4.628,0.501-6.776       c-0.174,4.061-0.085,8.089,0.265,11.988c0.034,0.384,0.281,0.564,0.515,0.55c0.2-0.018,0.4-0.204,0.367-0.571       c-0.291-3.252-0.313-6.745-0.067-11.239c0.413,1.94,0.365,4.023,0.319,6.046c-0.043,1.857-0.086,3.776,0.228,5.561       c0.05,0.286,0.201,0.381,0.286,0.412c0.038,0.014,0.078,0.021,0.118,0.021c0.09,0,0.18-0.034,0.257-0.098       c0.161-0.135,0.23-0.368,0.185-0.622c-0.326-1.85-0.238-3.82-0.153-5.726c0.076-1.681,0.153-3.407-0.053-5.07       c0.556,1.977,0.564,4.185,0.57,6.333c0.005,1.395,0.008,2.712,0.155,3.956c0.028,0.243,0.153,0.434,0.332,0.512       c0.132,0.056,0.275,0.042,0.384-0.039c0.078-0.058,0.203-0.2,0.167-0.5c-0.16-1.364-0.143-2.797-0.125-4.314       c0.015-1.244,0.03-2.52-0.062-3.762c0.593,2.438,0.625,5.046,0.561,7.534c-0.006,0.232,0.077,0.419,0.228,0.512       c0.12,0.074,0.265,0.075,0.389,0.009c0.164-0.088,0.26-0.276,0.266-0.514C426.292,249.564,426.118,244.46,422.488,240.953z"
								/>
							</g>
						</g>
						<g>
							<path
								style="fill:#E0D2FF;"
								d="M79.5,294.649v-17.406h2.7v-4.574H66.51v4.574h2.7v17.406      c-7.248,2.203-12.523,8.937-12.523,16.905c0,9.758,7.91,17.668,17.668,17.668s17.668-7.91,17.668-17.668      C92.023,303.586,86.747,296.853,79.5,294.649z"
							/>
							<g>
								<g>
									<path
										style="fill:#E254A8;"
										d="M61.312,308.035c-0.317,1.149-0.5,2.354-0.5,3.605c0,7.479,6.063,13.543,13.543,13.543        c7.479,0,13.543-6.063,13.543-13.543c0-1.25-0.183-2.455-0.5-3.605H61.312z"
									/>
								</g>
								<g>
									<path
										style="fill:#CC3B98;"
										d="M67.874,315.728c0,0.75-0.608,1.359-1.359,1.359c-0.75,0-1.359-0.608-1.359-1.359        c0-0.75,0.608-1.359,1.359-1.359C67.266,314.369,67.874,314.977,67.874,315.728z"
									/>
									<circle style="fill:#CC3B98;" cx="67.524" cy="312.115" r="1.359" />
									<path
										style="fill:#CC3B98;"
										d="M71.302,315.008c0,0.555-0.45,1.005-1.005,1.005c-0.555,0-1.005-0.45-1.005-1.005        c0-0.555,0.45-1.005,1.005-1.005C70.852,314.003,71.302,314.453,71.302,315.008z"
									/>
								</g>
							</g>
							<rect x="69.209" y="277.243" style="fill:#CABAF7;" width="10.29" height="1.779" />
						</g>
						<g>
							<path
								style="fill:#E0D2FF;"
								d="M239.243,134.162c0-9.006-7.301-16.306-16.306-16.306c-6.708,0-12.466,4.054-14.969,9.843      c-2.084-0.939-4.389-1.474-6.823-1.474c-2.536,0-4.93,0.584-7.081,1.598c-2.38-7.961-8.793-14.181-16.872-16.28      c-1.799-14.939-14.51-26.52-29.935-26.52c-16.658,0-30.161,13.504-30.161,30.161c0,0.903,0.047,1.795,0.125,2.678      c-0.042,0-0.083-0.006-0.125-0.006c-6.526,0-12.126,3.964-14.525,9.615c-1.815-0.955-3.88-1.502-6.073-1.502      c-6.358,0-11.651,4.541-12.825,10.556h155.38C239.165,135.752,239.243,134.967,239.243,134.162z"
							/>
						</g>
						<g>
							<path
								style="fill:#FBFAFF;"
								d="M389.128,133.766c-0.487,0-0.962,0.051-1.424,0.135c-1.907-7.315-8.539-12.723-16.452-12.723      c-4.913,0-9.327,2.094-12.434,5.424c-2.726-4.1-7.383-6.804-12.675-6.804c-2.147-9.614-10.724-16.802-20.985-16.802      c-11.878,0-21.507,9.629-21.507,21.507c0,0.887,0.06,1.759,0.164,2.618c-1.852-1.102-4.008-1.747-6.32-1.747      c-4.273,0-8.041,2.163-10.269,5.454c-0.993-0.355-2.058-0.558-3.173-0.558c-5.096,0-9.238,4.04-9.423,9.091h122.055      C395.697,136.123,392.688,133.766,389.128,133.766z"
							/>
						</g>
						<g>
							<g>
								<g>
									<g>
										<path
											style="fill:#FBFAFF;"
											d="M110.692,263.598l0.552,0.708l0,0v-68.319H61.061v60.695h35.468         C102.063,256.682,107.289,259.234,110.692,263.598z"
										/>
										<path
											style="fill:#E5A300;"
											d="M111.244,264.306l-0.552-0.708c-3.403-4.365-8.628-6.916-14.162-6.916H61.061v7.624H111.244z"
										/>
									</g>
									<g>
										<rect
											x="66.03"
											y="206.772"
											style="fill:#E0D2FF;"
											width="39.269"
											height="3.682"
										/>
										<rect
											x="66.03"
											y="215.874"
											style="fill:#E0D2FF;"
											width="39.269"
											height="3.682"
										/>
										<rect
											x="66.03"
											y="224.977"
											style="fill:#E0D2FF;"
											width="39.269"
											height="3.682"
										/>
										<rect
											x="66.03"
											y="234.079"
											style="fill:#E0D2FF;"
											width="39.269"
											height="3.682"
										/>
										<rect
											x="66.03"
											y="243.182"
											style="fill:#E0D2FF;"
											width="39.269"
											height="3.682"
										/>
									</g>
								</g>
								<g>
									<g>
										<path
											style="fill:#F5F4F9;"
											d="M111.827,263.598l-0.552,0.708h0v-68.319h50.183v60.695H125.99         C120.455,256.682,115.23,259.234,111.827,263.598z"
										/>
										<path
											style="fill:#E5A300;"
											d="M111.275,264.306l0.552-0.708c3.403-4.365,8.628-6.916,14.163-6.916h35.468v7.624H111.275z"
										/>
									</g>
									<g>
										<rect
											x="117.22"
											y="206.772"
											transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 273.7085 417.226)"
											style="fill:#CABAF7;"
											width="39.269"
											height="3.682"
										/>

										<rect
											x="117.22"
											y="215.874"
											transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 273.7085 435.4309)"
											style="fill:#CABAF7;"
											width="39.269"
											height="3.682"
										/>

										<rect
											x="117.22"
											y="224.977"
											transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 273.7085 453.6357)"
											style="fill:#CABAF7;"
											width="39.269"
											height="3.682"
										/>

										<rect
											x="117.22"
											y="234.079"
											transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 273.7085 471.8405)"
											style="fill:#CABAF7;"
											width="39.269"
											height="3.682"
										/>

										<rect
											x="117.22"
											y="243.182"
											transform="matrix(-1 -1.224647e-16 1.224647e-16 -1 273.7085 490.0453)"
											style="fill:#CABAF7;"
											width="39.269"
											height="3.682"
										/>
									</g>
								</g>
							</g>
							<polygon
								style="fill:#E254A8;"
								points="114.941,212.499 111.063,209.636 107.577,212.499 107.577,195.987 114.941,195.987           "
							/>
						</g>
						<g>
							<g>
								<g>
									<path
										style="fill:#7E5BB5;"
										d="M138.475,181.884c-3.203,0-5.808-2.605-5.808-5.808h2.544c0,1.8,1.464,3.264,3.264,3.264        c1.8,0,3.264-1.464,3.264-3.264h2.544C144.283,179.279,141.678,181.884,138.475,181.884z"
									/>
									<path
										style="fill:#7E5BB5;"
										d="M135.211,176.076h-2.544c0-1.8-1.464-3.264-3.264-3.264c-1.8,0-3.264,1.464-3.264,3.264h-2.544        c0-3.203,2.605-5.808,5.808-5.808C132.606,170.268,135.211,172.874,135.211,176.076z"
									/>
								</g>
								<g>
									<path
										style="fill:#7E5BB5;"
										d="M102.187,181.884c-3.202,0-5.808-2.605-5.808-5.808h2.544c0,1.8,1.464,3.264,3.264,3.264        c1.8,0,3.264-1.464,3.264-3.264h2.544C107.995,179.279,105.39,181.884,102.187,181.884z"
									/>
									<path
										style="fill:#7E5BB5;"
										d="M98.923,176.076h-2.544c0-1.8-1.464-3.264-3.264-3.264c-1.8,0-3.264,1.464-3.264,3.264h-2.544        c0-3.203,2.605-5.808,5.808-5.808C96.318,170.268,98.923,172.874,98.923,176.076z"
									/>
								</g>
								<g>
									<path
										style="fill:#7E5BB5;"
										d="M120.331,181.884c-3.203,0-5.808-2.605-5.808-5.808h2.544c0,1.8,1.464,3.264,3.264,3.264        c1.8,0,3.264-1.464,3.264-3.264h2.544C126.139,179.279,123.534,181.884,120.331,181.884z"
									/>
									<path
										style="fill:#7E5BB5;"
										d="M117.067,176.076h-2.544c0-1.8-1.464-3.264-3.264-3.264c-1.8,0-3.264,1.464-3.264,3.264h-2.544        c0-3.203,2.605-5.808,5.808-5.808C114.462,170.268,117.067,172.874,117.067,176.076z"
									/>
								</g>
							</g>
							<g>
								<g>
									<path
										style="fill:#7E5BB5;"
										d="M84.043,181.884c-3.203,0-5.808-2.605-5.808-5.808h2.544c0,1.8,1.464,3.264,3.264,3.264        c1.8,0,3.264-1.464,3.264-3.264h2.544C89.851,179.279,87.246,181.884,84.043,181.884z"
									/>
								</g>
							</g>
						</g>
						<g>
							<g>
								<g>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M246.548,374.91L246.548,374.91        c0-2.147,1.741-3.888,3.888-3.888s3.888,1.741,3.888,3.888l0,0"
									/>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M262.1,374.91L262.1,374.91        c0,2.147-1.741,3.888-3.888,3.888c-2.147,0-3.888-1.741-3.888-3.888l0,0"
									/>
								</g>
								<g>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M277.652,374.91L277.652,374.91        c0-2.147,1.741-3.888,3.888-3.888c2.147,0,3.888,1.741,3.888,3.888l0,0"
									/>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M293.204,374.91L293.204,374.91        c0,2.147-1.741,3.888-3.888,3.888c-2.147,0-3.888-1.741-3.888-3.888l0,0"
									/>
								</g>
								<g>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M262.1,374.91L262.1,374.91        c0-2.147,1.741-3.888,3.888-3.888c2.147,0,3.888,1.741,3.888,3.888l0,0"
									/>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M277.652,374.91L277.652,374.91        c0,2.147-1.741,3.888-3.888,3.888c-2.147,0-3.888-1.741-3.888-3.888l0,0"
									/>
								</g>
							</g>
							<g>
								<g>
									<path
										style="fill:none;stroke:#E5A300;stroke-width:2.1808;stroke-miterlimit:10;"
										d="M293.204,374.91L293.204,374.91        c0-2.147,1.741-3.888,3.888-3.888c2.147,0,3.888,1.741,3.888,3.888l0,0"
									/>
								</g>
							</g>
						</g>
						<g>
							<path
								style="fill:#E5A300;"
								d="M447.536,222.846c-1.088-0.423-2.036-1.071-2.743-1.872c-0.685-0.777-1.148-1.706-1.338-2.688      c-0.079-0.405-0.434-0.698-0.846-0.698s-0.768,0.293-0.846,0.698c-0.19,0.981-0.653,1.911-1.338,2.688      c-0.707,0.802-1.656,1.449-2.743,1.872c-0.331,0.129-0.55,0.448-0.55,0.804c0,0.355,0.218,0.674,0.55,0.803      c1.088,0.423,2.036,1.071,2.743,1.872c0.685,0.777,1.148,1.707,1.338,2.688c0.078,0.406,0.434,0.698,0.846,0.698      s0.768-0.293,0.846-0.698c0.19-0.981,0.653-1.91,1.338-2.688c0.707-0.801,1.656-1.449,2.743-1.872      c0.331-0.129,0.55-0.448,0.55-0.803C448.086,223.294,447.867,222.975,447.536,222.846z"
							/>
							<path
								style="fill:#B3A5E5;"
								d="M452.012,213.253c-0.934,0-1.694,0.759-1.694,1.693c0,0.934,0.759,1.693,1.694,1.693      c0.933,0,1.693-0.76,1.693-1.693C453.705,214.012,452.945,213.253,452.012,213.253z"
							/>
						</g>
						<path
							style="fill:#B3A5E5;"
							d="M457.602,281.226c0,2.093-1.697,3.79-3.79,3.79s-3.79-1.697-3.79-3.79s1.697-3.79,3.79-3.79     S457.602,279.133,457.602,281.226z"
						/>
						<g>
							<path
								style="fill:#E5A300;"
								d="M66.094,165.806c-1.224-0.476-2.292-1.205-3.087-2.107c-0.771-0.875-1.292-1.92-1.506-3.025      c-0.088-0.456-0.488-0.786-0.953-0.786c-0.465,0-0.864,0.33-0.953,0.786c-0.214,1.104-0.735,2.15-1.506,3.025      c-0.796,0.902-1.863,1.631-3.087,2.107c-0.373,0.145-0.619,0.504-0.619,0.904c0,0.4,0.246,0.759,0.619,0.904      c1.224,0.476,2.292,1.205,3.087,2.107c0.771,0.875,1.292,1.921,1.506,3.025c0.088,0.456,0.488,0.786,0.953,0.786      c0.465,0,0.864-0.329,0.953-0.786c0.214-1.104,0.735-2.15,1.506-3.025c0.795-0.902,1.863-1.631,3.087-2.107      c0.373-0.145,0.618-0.504,0.618-0.904C66.713,166.311,66.467,165.952,66.094,165.806z"
							/>
							<path
								style="fill:#B3A5E5;"
								d="M46.46,177.19c0-1.003,0.813-1.816,1.816-1.816c1.003,0,1.816,0.813,1.816,1.816      c0,1.003-0.813,1.816-1.816,1.816C47.273,179.007,46.46,178.193,46.46,177.19z"
							/>
						</g>
						<g>
							<path
								style="fill:#E5A300;"
								d="M53.065,279.379c-0.905-0.352-1.694-0.891-2.282-1.557c-0.57-0.646-0.955-1.419-1.113-2.235      c-0.065-0.337-0.361-0.581-0.704-0.581c-0.343,0-0.639,0.243-0.704,0.581c-0.158,0.816-0.543,1.589-1.113,2.235      c-0.588,0.667-1.377,1.205-2.282,1.557c-0.276,0.107-0.457,0.373-0.457,0.668c0,0.296,0.181,0.561,0.457,0.668      c0.905,0.352,1.694,0.891,2.282,1.557c0.57,0.646,0.955,1.419,1.113,2.235c0.065,0.337,0.361,0.581,0.704,0.581      c0.344,0,0.639-0.243,0.704-0.581c0.158-0.816,0.543-1.589,1.113-2.235c0.588-0.667,1.377-1.205,2.282-1.557      c0.276-0.107,0.457-0.373,0.457-0.668C53.522,279.752,53.34,279.486,53.065,279.379z"
							/>
							<path
								style="fill:#B3A5E5;"
								d="M42.674,269.659c0,0.959-0.777,1.736-1.736,1.736c-0.959,0-1.736-0.777-1.736-1.736      c0-0.959,0.777-1.736,1.736-1.736C41.897,267.923,42.674,268.7,42.674,269.659z"
							/>
						</g>
						<g>
							<rect
								x="170.6"
								y="136.846"
								transform="matrix(0.8636 -0.5042 0.5042 0.8636 -57.6462 108.8954)"
								style="fill:#F5F4F9;"
								width="3.644"
								height="48.271"
							/>
							<g>
								<path
									style="fill:#FFFFFF;"
									d="M149.57,115.01l-7.872,29.958c1.781,2.065,3.949,3.669,6.334,4.768l9.397-35.764       C154.813,113.756,152.136,114.088,149.57,115.01z"
								/>
								<path
									style="fill:#F5F4F9;"
									d="M146.43,116.462c-8.961,5.232-11.984,16.737-6.753,25.698c0.594,1.017,1.278,1.947,2.021,2.808       l7.872-29.958C148.5,115.395,147.447,115.868,146.43,116.462z"
								/>
								<path
									style="fill:#F5F4F9;"
									d="M161.611,150.578c1.286-0.412,2.55-0.956,3.765-1.665c8.961-5.232,11.984-16.738,6.752-25.699       c-0.709-1.215-1.542-2.31-2.46-3.301L161.611,150.578z"
								/>
								<path
									style="fill:#F5F4F9;"
									d="M157.43,113.972l-9.397,35.764c1.832,0.844,3.788,1.379,5.791,1.604l9.438-35.918       C161.407,114.633,159.44,114.138,157.43,113.972z"
								/>
								<path
									style="fill:#FFFFFF;"
									d="M163.261,115.422l-9.438,35.918c2.58,0.29,5.23,0.057,7.787-0.761l8.057-30.665       C167.844,117.944,165.651,116.438,163.261,115.422z"
								/>
							</g>
							<path
								style="fill:#FFD652;"
								d="M166.721,151.217c-10.217,5.965-23.382,2.506-29.348-7.712      c-5.965-10.217-2.506-23.382,7.711-29.348c10.217-5.965,23.383-2.506,29.348,7.711S176.939,145.252,166.721,151.217z       M147.139,117.677c-8.277,4.832-11.079,15.497-6.247,23.774c4.832,8.277,15.497,11.079,23.774,6.247      c8.277-4.832,11.079-15.498,6.247-23.775C166.081,115.647,155.416,112.844,147.139,117.677z"
							/>
							<g>
								<rect
									x="178.468"
									y="156.855"
									transform="matrix(0.8636 -0.5042 0.5042 0.8636 -63.0193 115.2908)"
									style="fill:#CC3B98;"
									width="6.19"
									height="34.516"
								/>

								<rect
									x="176.518"
									y="159.057"
									transform="matrix(0.8636 -0.5042 0.5042 0.8636 -64.6449 113.6923)"
									style="fill:#E24BB4;"
									width="2.546"
									height="34.516"
								/>
							</g>
							<path
								style="fill:#FFD652;"
								d="M193.858,188.4l-8.096,4.727c-0.658,0.384-1.51,0.16-1.894-0.498l0,0      c-0.384-0.658-0.16-1.51,0.498-1.894l8.096-4.727c0.658-0.384,1.51-0.16,1.894,0.498l0,0      C194.74,187.163,194.516,188.016,193.858,188.4z"
							/>
						</g>
						<g>
							<path
								style="fill:#543C8E;"
								d="M137.58,106.684l-0.854-1.691c0.437-0.221,0.878-0.431,1.325-0.63l0.772,1.73      C138.405,106.28,137.99,106.477,137.58,106.684z"
							/>
							<path
								style="fill:#543C8E;"
								d="M119.969,141.679c-0.249-0.998-0.453-2.024-0.607-3.051l1.874-0.28      c0.145,0.967,0.337,1.934,0.571,2.873L119.969,141.679z M119.009,134.499c-0.006-0.247-0.009-0.495-0.009-0.743      c0-0.788,0.029-1.584,0.085-2.365l1.89,0.136c-0.053,0.736-0.08,1.486-0.08,2.229c0,0.233,0.003,0.467,0.008,0.7      L119.009,134.499z M121.502,127.658l-1.856-0.376c0.205-1.015,0.463-2.03,0.764-3.016l1.811,0.555      C121.937,125.748,121.696,126.702,121.502,127.658z M123.611,121.179l-1.721-0.792c0.43-0.935,0.914-1.863,1.438-2.76      l1.635,0.956C124.47,119.427,124.015,120.3,123.611,121.179z M127.145,115.346l-1.5-1.156c0.629-0.816,1.306-1.614,2.012-2.37      l1.385,1.293C128.376,113.825,127.738,114.577,127.145,115.346z M131.882,110.43l-1.211-1.457      c0.797-0.663,1.632-1.293,2.483-1.872l1.067,1.565C133.419,109.213,132.633,109.806,131.882,110.43z"
							/>
							<path
								style="fill:#543C8E;"
								d="M121.806,146.998c-0.2-0.446-0.391-0.896-0.57-1.351l1.763-0.694      c0.168,0.427,0.346,0.85,0.535,1.269L121.806,146.998z"
							/>
						</g>
						<g>
							<path
								style="fill:#543C8E;"
								d="M370.354,150.309l-0.79-1.722c0.447-0.204,0.899-0.397,1.356-0.577l0.694,1.762      C371.19,149.939,370.769,150.118,370.354,150.309z"
							/>
							<path
								style="fill:#543C8E;"
								d="M401.87,158.082c-0.588-0.755-1.226-1.487-1.894-2.176l1.36-1.319      c0.716,0.738,1.398,1.522,2.029,2.332L401.87,158.082z M397.106,153.345c-0.761-0.587-1.561-1.136-2.376-1.634l0.986-1.617      c0.874,0.533,1.731,1.122,2.547,1.75L397.106,153.345z M391.312,149.959c-0.44-0.186-0.886-0.359-1.336-0.518      c-0.455-0.162-0.914-0.31-1.376-0.445l0.531-1.819c0.498,0.145,0.992,0.305,1.48,0.479c0.485,0.172,0.964,0.358,1.437,0.558      L391.312,149.959z M375.283,148.635l-0.426-1.846c1.001-0.231,2.026-0.408,3.046-0.529l0.222,1.882      C377.174,148.253,376.217,148.419,375.283,148.635z M384.843,148.198c-0.946-0.129-1.914-0.207-2.876-0.233l0.05-1.893      c1.03,0.027,2.067,0.111,3.081,0.249L384.843,148.198z"
							/>
							<path
								style="fill:#543C8E;"
								d="M404.643,162.503c-0.202-0.41-0.414-0.813-0.638-1.211l1.652-0.929      c0.241,0.428,0.47,0.863,0.686,1.304L404.643,162.503z"
							/>
						</g>
						<path
							style="fill:#543C8E;"
							d="M149.688,357.808l-0.139-1.889c0.902-0.067,1.805-0.193,2.687-0.378l0.389,1.854     C151.661,357.597,150.673,357.736,149.688,357.808z M145.739,357.755c-0.985-0.1-1.968-0.266-2.923-0.493l0.438-1.843     c0.874,0.208,1.774,0.36,2.676,0.451L145.739,357.755z M156.407,356.231l-0.723-1.75c0.631-0.261,1.248-0.557,1.835-0.88     c0.195-0.107,0.388-0.217,0.579-0.331l0.974,1.624c-0.211,0.127-0.423,0.248-0.638,0.366     C157.784,355.618,157.103,355.944,156.407,356.231z M139.065,356.003c-0.911-0.402-1.796-0.872-2.629-1.396l1.008-1.604     c0.756,0.475,1.559,0.902,2.386,1.266L139.065,356.003z M162.262,352.551l-1.259-1.415c0.671-0.597,1.309-1.248,1.897-1.935     l1.44,1.23C163.697,351.184,162.998,351.897,162.262,352.551z M166.637,347.218l-1.632-0.962     c0.461-0.781,0.872-1.596,1.224-2.423l1.744,0.74C167.589,345.476,167.139,346.367,166.637,347.218z M169.189,340.809     l-1.848-0.416c0.2-0.886,0.338-1.786,0.41-2.674l1.888,0.152C169.56,338.848,169.408,339.837,169.189,340.809z"
						/>
					</g>
				</g>
			</g>
		</svg>

		<!-- svelte-ignore a11y_click_events_have_key_events -->
		<!-- svelte-ignore a11y_no_noninteractive_element_interactions -->

		<form onsubmit={enterTest}>
			<div class="nameContainer">
				<input
					type="text"
					placeholder={'Enter the code'}
					id="name"
					name="email"
					required
					style={$language === 'ar' ? 'padding: 0 3.2rem 0 1rem' : 'padding: 0 1rem 0 3.2rem'}
					bind:value={testCode}
				/>
				<Icon
					icon="hugeicons:sms-code"
					width="31"
					height="31"
					style={$language === 'ar'
						? 'position: absolute; top: 1.5rem; right: 1rem; color: var(--text-color);'
						: 'position: absolute; top: 1.5rem; left: 1rem; color: var(--text-color)'}
				/>
			</div>
			<button type="submit" class="enterCodeBtn">Enter</button>
			<p class="goBack" onclick={() => (join = false)} style="text-align: center;">Go back</p>
		</form>
	{/if}

	{#if create}
		<div class="create-container">
			<div
				style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;"
			>
				<h2>📝 Create Test</h2>
				<span class="goBackBtn">
					<Icon
						style="cursor: pointer;"
						icon="hugeicons:link-backward"
						width="35"
						height="35"
						onclick={() => (create = false)}
					/>
				</span>
			</div>
			<form onsubmit={handleSubmit}>
				<!-- svelte-ignore a11y_label_has_associated_control -->
				<div class="inputsContainer">
					<div class="nameContainer">
						<label
							style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
							>Title</label
						>
						<input bind:value={testTitle} placeholder="Enter your title" required />
					</div>

					<div class="nameContainer">
						<label
							style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
							>Number of Questions</label
						>
						<input type="number" min="1" bind:value={questionCount} />
					</div>
				</div>

				<div style="margin: 0.5rem 0.5rem 0 0.5rem;">
					<div class="nameContainer2">
						<label
							style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
							>Description</label
						>
						<textarea bind:value={description} rows="3" placeholder="Describe your test" required
						></textarea>
					</div>
				</div>

				{#each questions as question, index}
					<div class="question-block">
						<div class="inputsContainer">
							<div class="nameContainer3">
								<label
									style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
									>Question {index + 1}</label
								>
								<input placeholder="Enter question text..." bind:value={question.text} required />
							</div>

							<div class="nameContainer3">
								<label
									style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
									>Answer Type</label
								>
								<select bind:value={question.type}>
									{#each answerTypes as type}
										<option value={type}>{type}</option>
									{/each}
								</select>
							</div>
						</div>

						{#if question.type === 'radio' || question.type === 'checkbox'}
							<div style="margin: 0.5rem;">
								<button type="button" class="add-btn" onclick={() => addOption(index)}
									>Add Option</button
								>
								<div class="option-group-container">
									{#each question.options as option, oIndex}
										<div class="option-group">
											<input
												type="text"
												bind:value={questions[index].options[oIndex]}
												placeholder="Option text..."
												required
											/>

											<button
												type="button"
												class="remove-btn"
												onclick={() => removeOption(index, oIndex)}
											>
												<Icon icon="hugeicons:delete-02" width="30" height="30" /></button
											>

											<button
												type="button"
												class="correct-toggle"
												class:inactive={!question.correctAnswers.includes(oIndex)}
												onclick={() => toggleCorrectAnswer(index, oIndex)}
											>
												<Icon icon="hugeicons:tick-04" width="30" height="30" />
											</button>
										</div>
									{/each}
								</div>
							</div>
						{:else if question.type === 'text'}
							<div style="margin: 0.5rem;">
								<div class="nameContainer2">
									<label
										style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
										>Correct Answer</label
									>
									<input
										type="text"
										bind:value={questions[index].correctAnswers[0]}
										placeholder="Exact or keywords..."
										required
									/>
								</div>
							</div>
						{/if}

						<div style="margin: 0.5rem 0.5rem 0rem 0.5rem;">
							<div class="nameContainer2">
								<label
									style="position: absolute; top: -0.5rem; left: 0.8rem; background-color: var(--background-color)"
									>Explanation / Notes</label
								>
								<textarea
									rows="2"
									bind:value={question.explanation}
									placeholder="Explain the correct answer, or give extra notes."
								></textarea>
							</div>
						</div>
					</div>
				{/each}

				<button type="submit" class="submit-btn">Create Test</button>
			</form>
		</div>
	{/if}

	{#if test}
		<div class="test-container">
			<div
				style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px;"
			>
				<h2>🏫 {test.title}</h2>
				<span class="goBackBtn">
					<Icon
						style="cursor: pointer;"
						icon="hugeicons:link-backward"
						width="35"
						height="35"
						onclick={() => (test = null)}
					/>
				</span>
			</div>
			<form onsubmit={submitAnswers}>
				{#each test.questions as q, i}
					<div style="margin-bottom: 1em;" class="answerQuestionBlock">
						<p style="margin-bottom: 1rem;"><strong>Q{i + 1}:</strong> {q.text}</p>

						{#each q.options as opt, j}
							{#if q.type === 'radio'}
								<label
									class={submitted
										? j === q.correctAnswers[0]
											? 'correct'
											: answers[i] == j
												? 'incorrect'
												: ''
										: ''}
								>
									<input type="radio" bind:group={answers[i]} value={j} disabled={submitted} />
									{opt}
								</label>
							{:else if q.type === 'checkbox'}
								<label
									class={submitted
										? q.correctAnswers.includes(j)
											? 'correct'
											: answers[i]?.includes(j)
												? 'incorrect'
												: ''
										: ''}
								>
									<input
										type="checkbox"
										checked={answers[i]?.includes(j)}
										onchange={() => {
											if (!answers[i]) answers[i] = [];
											if (answers[i].includes(j)) {
												answers[i] = answers[i].filter((v) => v !== j);
											} else {
												answers[i] = [...answers[i], j];
											}
										}}
										disabled={submitted}
									/>
									{opt}
								</label>
							{/if}
						{/each}

						{#if q.type === 'text'}
							<input
								type="text"
								id="test-container-input"
								bind:value={answers[i]}
								placeholder="Type your answer..."
								disabled={submitted}
								class={submitted
									? q.correctAnswers[0]
											.toLowerCase()
											.split(' ')
											.every((word) => answers[i]?.toLowerCase().includes(word))
										? 'correct'
										: 'incorrect'
									: ''}
							/>
						{/if}

						{#if submitted}
							<div style="display: flex; flex-direction:column;">
								<button
									type="button"
									class="expBtn"
									onclick={() => (showExplanations[i] = !showExplanations[i])}
								>
									<Icon icon="hugeicons:ai-idea" width="30" height="30" />
									{showExplanations[i] ? 'Hide' : 'Show'} Explanation:
								</button>

								{#if showExplanations[i]}
									<p><em>Explanation: {q.explanation}</em></p>
								{/if}
							</div>
						{/if}
					</div>
				{/each}

				{#if !submitted}
					<button type="submit" class="submit-btn">Submit Test</button>
				{/if}
			</form>
		</div>
	{/if}
</section>

<style>
	section {
		min-height: 70vh;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;

		font-size: var(--p-size);
	}

	.buttons {
		display: flex;
	}

	.goBackBtn {
		display: flex;
		transition: 0.7s ease;
	}

	.goBackBtn:hover {
		color: var(--main-color);
	}

	.createBtn {
		padding: 0rem 1.7rem;
		height: 4rem;
		border-radius: var(--buttons-radius);
		background-color: var(--main-color);
		color: var(--background-color);
		font-size: var(--p-size);
		font-weight: 500;
		transition: 0.7s ease;
		filter: drop-shadow(0 0 0px var(--main-color));
		margin: 0.25rem;
		display: flex;
		align-items: center;
		cursor: pointer;
	}
	.createBtn:hover {
		filter: drop-shadow(0 0 10px var(--main-color));
	}

	.joinBtn {
		padding: 0rem 1.7rem;
		height: 4rem;
		border-radius: var(--buttons-radius);
		background-color: var(--second-color);
		color: var(--background-color);
		font-size: var(--p-size);
		font-weight: 500;
		transition: 0.7s ease;
		filter: drop-shadow(0 0 0px var(--second-color));
		margin: 0.25rem;
		display: flex;
		align-items: center;
		cursor: pointer;
	}
	.joinBtn:hover {
		filter: drop-shadow(0 0 10px var(--second-color));
	}

	.svgImg {
		width: 100%;
		max-width: 25rem;
	}

	.svgImg path {
		stroke: #7b70ee; /* Match your fill color */
		stroke-width: 1;
		fill-opacity: 0; /* Hide fill initially */
		animation: draw 2s ease forwards;
	}

	.goBack {
		margin: 0.5rem 0;
		font-size: var(--p-size);
		text-decoration: underline wavy;
		cursor: pointer;
		font-weight: 500;
		color: red;
	}

	.correct {
		background-color: #c8f7c5 !important;
	}
	.incorrect {
		background-color: #f7c5c5 !important;
	}

	#test-container-input {
		width: 100%;
		border-radius: var(--buttons-radius);
		color: var(--text-color2);
		/* 6px rounded */
		border: 1px solid var(--input-color);
		/* Customize input color via CSS variable */

		height: 4rem;
		/* py-1 is 0.25rem, px-3 is 0.75rem */
		font-size: var(--p-size);
		/* text-sm */
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		/* shadow-sm */
		transition: 0.2s ease;

		outline-color: var(--main-color);

		background-color: var(--background-color);
		color: var(--text-color);
		margin: 0.5rem 0;
	}

	@keyframes draw {
		from {
			stroke-dasharray: 1000;
			stroke-dashoffset: 1000;
			fill-opacity: 0;
		}
		to {
			stroke-dashoffset: 0;
			fill-opacity: 1;
		}
	}

	.nameContainer {
		position: relative;
		width: 100%;
		max-width: 37.7rem;
	}

	.nameContainer2 {
		position: relative;
		width: 100%;
	}

	.nameContainer3 {
		position: relative;
		width: 100%;
		max-width: 36rem;
	}

	.nameContainer2 textarea {
		width: 100%;
		border-radius: var(--buttons-radius);
		color: var(--text-color2);
		/* 6px rounded */
		border: 1px solid var(--input-color);
		/* Customize input color via CSS variable */

		height: 6rem;
		/* py-1 is 0.25rem, px-3 is 0.75rem */
		font-size: var(--p-size);
		/* text-sm */
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		/* shadow-sm */
		transition: 0.2s ease;

		outline-color: var(--main-color);

		background-color: var(--background-color);
		color: var(--text-color);
		margin: 0.5rem 0;
	}

	.nameContainer3 input,
	select {
		width: 100%;

		border-radius: var(--buttons-radius);
		color: var(--text-color2);
		/* 6px rounded */
		border: 1px solid var(--input-color);
		/* Customize input color via CSS variable */

		height: 4rem;
		/* py-1 is 0.25rem, px-3 is 0.75rem */
		font-size: var(--p-size);
		/* text-sm */
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		/* shadow-sm */
		transition: 0.2s ease;

		outline-color: var(--main-color);

		background-color: var(--background-color);
		color: var(--text-color);
		margin: 0.5rem 0;
	}

	.nameContainer input,
	.nameContainer2 input {
		width: 100%;
		border-radius: var(--buttons-radius);
		color: var(--text-color2);
		/* 6px rounded */
		border: 1px solid var(--input-color);
		/* Customize input color via CSS variable */

		height: 4rem;
		/* py-1 is 0.25rem, px-3 is 0.75rem */
		font-size: var(--p-size);
		/* text-sm */
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		/* shadow-sm */
		transition: 0.2s ease;

		outline-color: var(--main-color);

		background-color: var(--background-color);
		color: var(--text-color);
		margin: 0.5rem 0;
	}

	.option-group input {
		border-radius: var(--buttons-radius);
		color: var(--text-color2);
		min-width: 16rem;
		/* 6px rounded */
		border: 1px solid var(--input-color);
		/* Customize input color via CSS variable */

		height: 4rem;
		/* py-1 is 0.25rem, px-3 is 0.75rem */
		font-size: var(--p-size);
		/* text-sm */
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		/* shadow-sm */
		transition: 0.2s ease;

		outline-color: var(--main-color);

		background-color: var(--background-color);
		color: var(--text-color);
		margin: 0.5rem 0;
	}

	.create-container,
	.test-container {
		width: var(--width);
		max-width: var(--max-width);

		margin: 0 auto;
		padding: 20px;
			min-height: 70vh;
	
	}

	.answerQuestionBlock {
		border-radius: var(--buttons-radius);
		border: 1px solid var(--input-color);
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
		padding: 1rem;
		margin: 0 0.5rem;

		& label {
			border-radius: 2rem;
			display: flex;
			align-items: center;
			padding: 0 1rem;

			& input {
				margin: 0 0.25rem;
			}
		}
	}

	.inputsContainer {
		width: 100%;
		display: flex;
		justify-content: space-between;

		flex-wrap: wrap;

		& div {
			width: 100%;
			margin: 0rem 0.5rem;
		}
	}

	h2 {
		font-size: 1.5rem;
	}

	form {
		display: flex;
		flex-direction: column;
	}

	label {
		display: block;
		margin-bottom: 4px;
	}

	.create-container label {
		font-weight: bold;
	}

	input,
	textarea,
	select {
		padding: 8px;
		resize: none;
	}

	.question-block {
		margin: 0.5rem;
		padding: 12px 12px 0 12px;
		border-radius: var(--buttons-radius);
		margin-bottom: 16px;

		border: 1px solid var(--input-color);
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);
	}

	.option-group-container {
		display: flex;
		justify-content: space-evenly;
		flex-wrap: wrap;
	}

	.option-group {
		display: flex;
		gap: 8px;
		align-items: center;
		margin: 6px;
	}

	.option-group input[type='text'] {
		flex: 1;
	}

	.checkbox-label {
		display: flex;
		align-items: center;
		gap: 4px;
	}

	button {
		padding: 10px;
		font-size: 1rem;
		cursor: pointer;
		border: none;
		border-radius: 4px;
	}

	.submit-btn {
		margin: 0 0.5rem;
		background-color: var(--main-color);
		color: #fff;
		text-decoration: none;
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
		display: inline-flex;
		align-items: center;
		cursor: pointer;
		justify-content: center;
		white-space: nowrap;
		font-weight: 500;
		transition: 0.7s ease;
		outline: none;
		border: 1px solid var(--main-color);
		/* shadow-sm */
		/* 9 * 0.25rem = 2.25rem */
		border-radius: var(--buttons-radius);
		height: 3rem;
		font-size: var(--p-size);

		&:disabled {
			pointer-events: none;
			opacity: 0.5;
		}

		/* Custom hover color for a specific state */
		&:hover {
			filter: drop-shadow(0 0 5px var(--main-color));
		}
	}

	.enterCodeBtn {
		margin: 0.5rem 0rem;
		background-color: var(--main-color);
		color: #fff;
		text-decoration: none;
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
		display: inline-flex;
		align-items: center;
		cursor: pointer;
		justify-content: center;
		white-space: nowrap;
		font-weight: 500;
		transition: 0.7s ease;
		outline: none;
		border: 1px solid var(--main-color);
		/* shadow-sm */
		/* 9 * 0.25rem = 2.25rem */
		border-radius: var(--buttons-radius);
		height: 2.5rem;
		font-size: var(--p-size);

		&:disabled {
			pointer-events: none;
			opacity: 0.5;
		}

		/* Custom hover color for a specific state */
		&:hover {
			filter: drop-shadow(0 0 5px var(--main-color));
		}
	}

	.expBtn {
		border-radius: var(--buttons-radius);
		color: var(--main-color);
		font-weight: 500;
		font-size: var(--p-size);
		transition: 0.7s ease;
		display: flex;
		align-items: center;
		margin: 0 0.25rem;

		&:disabled {
			pointer-events: none;
			opacity: 0.5;
		}

		& p {
			margin: 0 0.25rem;
		}

		/* Custom hover color for a specific state */
		&:hover {
			filter: drop-shadow(0 0 5px var(--main-color));
		}
	}

	.add-btn {
		background-color: var(--main-color);
		color: #fff;
		text-decoration: none;
		box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
		display: inline-flex;
		align-items: center;
		cursor: pointer;
		justify-content: center;
		white-space: nowrap;
		font-weight: 500;
		transition: 0.7s ease;
		outline: none;
		border: 1px solid var(--main-color);
		/* shadow-sm */
		/* 9 * 0.25rem = 2.25rem */
		border-radius: var(--buttons-radius);
		height: 2rem;
		font-size: var(--p-size);

		&:disabled {
			pointer-events: none;
			opacity: 0.5;
		}

		/* Custom hover color for a specific state */
		&:hover {
			filter: drop-shadow(0 0 5px var(--main-color));
		}
	}

	.remove-btn {
		background-color: #e74c3c;
		color: white;
		font-size: 0.9rem;
		border-radius: 100%;
		display: flex;
	}

	.correct-toggle {
		background-color: #2ecc71;
		color: white;

		border-radius: 4px;
		font-size: 0.8rem;

		border-radius: 100%;
		display: flex;
	}

	.correct-toggle.inactive {
		background-color: #ccc;
	}
</style>
